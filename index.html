<!DOCTYPE html>
<html>
    <head>
      <meta charset="utf-8">
      <title>Detect old browsers</title>
      <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
      
      <style type="text/css">
        #alert-on-android-browser {
          display: none;
        }
        
        #alert-on-ie {
          display: none;
        }
      </style>
    </head>
    
    <body>
      <div id="alert-on-android-browser">
        <a id="alert-on-android-browser__intent">Google Chromeでひらく</a>
      </div>

      <div id="alert-on-ie">
        <a id="alert-on-ie__link-to-chrome" href="https://www.google.co.jp/chrome/browser/desktop/">Google Chromeをインストールする</a>
      </div>
      
      <script src="/js/detect-android-browser.js"></script>
      <script src="/js/detect-old-ies.js"></script>
      <script>
        /* global DetectAndroidBrowser */
        /* global DetectOldIEs */
        /* global location */
        var intentUrl = 'intent://{{currentUrl}}#Intent;scheme=https;action=android.intent.action.VIEW;package=com.android.chrome;end',
            isAndroidBrowser,
            isOldIE,
            alertBoxOnAndroid,
            intentToChrome,
            alertBoxOnIE,
            linkToChrome,
            href;
            
        isAndroidBrowser = DetectAndroidBrowser();
        if (isAndroidBrowser) {
          alertBoxOnAndroid = document.getElementById('alert-on-android-browser');
          intentToChrome = document.getElementById('alert-on-android-browser__intent');
          href = location.href;
          href = href.replace(/^https?:\/\/(.+?)\/?$/, '$1');
          intentUrl = intentUrl.replace(/{{currentUrl}}/, href);
          intentToChrome.setAttribute('href', intentUrl);
          alertBoxOnAndroid.style.display = 'block';
        }
        
        isOldIE = DetectOldIEs('lte_IE8');
        if (isOldIE) {
          alertBoxOnIE = document.getElementById('alert-on-ie');
          linkToChrome = document.getElementById('alert-on-ie__link-to-chrome');
          alertBoxOnIE.style.display = 'block';
        }
      </script>
    </body>
</html>